<div class="grid gap-4 p-0 et-card bg-color-codemirror-gutters-bg">
  <div class="flex items-center justify-between p-4 bg-color-canvas-subtle">
    <span class="text-xl font-bold cursor-default text-color-accent-fg">Add Transaction</span>
    <span
      class="transition-colors duration-200 cursor-pointer material-icons text-color-fg-muted hover:text-color-accent-fg"
      (click)="closeDialog()">
      clear
    </span>
  </div>
  <div class="grid p-4">
    <form [formGroup]="formGroup" (ngSubmit)="addTransaction()">
      <div class="grid grid-rows-[1fr_auto] gap-2">
        <div class="grid grid-cols-2 gap-2">
          <div class="et-form-field-wrapper">
            <label for="direction-input" class="font-bold">Direction</label>
            <div class="et-form-field-input-wrapper">
              <input formControlName="direction" id="direction-input" type="hidden" />
              <div class="flex items-center">
                <button
                  class="rounded-tr-none rounded-br-none et-button"
                  [ngClass]="{ 'bg-color-accent-fg text-color-fg-on-emphasis': direction().value === 'expense' }"
                  type="button"
                  (click)="patchDirection('expense')">
                  Expense
                </button>
                <button
                  class="rounded-tl-none rounded-bl-none et-button"
                  [ngClass]="{ 'bg-color-accent-fg text-color-fg-on-emphasis': direction().value === 'income' }"
                  type="button"
                  (click)="patchDirection('income')">
                  Income
                </button>
              </div>
            </div>
          </div>
          <div class="et-form-field-wrapper">
            <label for="amount-input" class="font-bold">Amount</label>
            <div class="et-form-field-input-wrapper">
              <input
                class="w-full et-input"
                formControlName="amount"
                id="amount-input"
                type="number"
                min="0"
                autofocus="true"
                (blur)="checkControl(amount())" />
              <ng-container *ngIf="amount().error.flag">
                <span class="et-form-field-input-error-message">{{ amount().error.message }}</span>
              </ng-container>
            </div>
          </div>
          <div class="et-form-field-wrapper">
            <label for="category-input" class="font-bold">Category</label>
            <div class="et-form-field-input-wrapper">
              <expenses-tracker-select
                [formControlInput]="formGroup.controls.category"
                [idInput]="category().name + '-input'"
                [dataInput]="categoryOptions"
                [selectedInput]="category().value"
                (selectionChange$)="patchCategory($event)"></expenses-tracker-select>
            </div>
          </div>
          <div class="et-form-field-wrapper">
            <label for="payment-mode-input" class="font-bold">Payment Mode</label>
            <div class="et-form-field-input-wrapper">
              <expenses-tracker-switch
                [formControlInput]="formGroup.controls.paymentMode"
                [idInput]="paymentMode().name + '-input'"
                [dataInput]="paymentModeOptions"
                [selectedInput]="paymentMode().value"
                (selectionChange$)="patchPaymentMode($event)"></expenses-tracker-switch>
            </div>
          </div>
          <div class="et-form-field-wrapper">
            <label for="timestamp-input" class="font-bold">Timestamp</label>
            <expenses-tracker-datepicker
              [formControlInput]="formGroup.controls.timestamp"
              [idInput]="timestamp().name + '-input'"
              (dateSelected$)="patchTimestamp($event)"></expenses-tracker-datepicker>
          </div>
          <div class="et-form-field-wrapper">
            <label for="message-input" class="font-bold">Message</label>
            <div class="et-form-field-input-wrapper">
              <input class="w-full et-input" formControlName="message" id="message-input" type="text" />
              <ng-container *ngIf="message().error.flag">
                <span class="et-form-field-input-error-message">{{ message().error.message }}</span>
              </ng-container>
            </div>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-2">
          <button type="submit" class="w-full et-button et-button-danger" (click)="cancelAddTransaction()">
            <span class="material-icons min-w-[24px]">clear</span>
            <span>Cancel</span>
          </button>
          <button type="submit" class="w-full et-button et-button-primary">
            <span class="material-icons min-w-[24px]">save</span>
            <span>Save</span>
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
